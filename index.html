<!DOCTYPE html>

<html lang="en">
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
        <link href="styles.css" rel="stylesheet">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Mulish:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">


        <title>Stretch & Folds Tracker</title>
    </head>
    <body style="background-color: #FAF5EC">

        <audio src="notification.mp3" id="notificationSound"></audio>

        <!-- <div class="navbar">
                <div class="d-flex justify-content-center">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="tracker.html">Tracker</a></li>
                        <li><a href="about.html">About</a></li>
                    </ul>
                </div>
        </div>-->

        <div class="donation">
            <p><a href="https://ko-fi.com/korniann" target="_blank">Keep the dough rising! Tip $1 to support the project. âžœ</a></p>
        </div>

        <div class="tracker-heading">
            <h1>Sourdough Stretch & Fold Tracker</h1>
        </div>

        <script>

            var timerInterval;

            function incrementCounter() {
                /* Get the element reference*/
                var foldCounterElement = document.getElementById("foldCounter");
                /* Extract the current value as a number*/
                var foldsNumber = parseInt(foldCounterElement.textContent);

                /* Increase the counter value*/
                foldsNumber++;

                /* Update the display with the incremented value (converted to text)*/
                foldCounterElement.textContent = foldsNumber.toString();
            }




            function startTimer() {
                /* Store the initial timer in seconds*/
                var timerValue = 30*60;

                /* Get a reference to the audio when the timer ends*/
                var notificationSound = document.getElementById("notificationSound");

                /* Get a reference to the HTML element that displays the remaining timer value*/
                var timerDisplay = document.getElementById("timerDisplay");

                    /* Define an inner function that will handle the timer and sound*/
                    function updateTimer() {
                        /* Decrease the timer variable by 1*/
                        timerValue--;

                        /* Convert the remaining timerValue to minutes and seconds*/
                        var minutes = Math.floor(timerValue / 60);
                        var seconds = timerValue % 60;
                        timerDisplay.textContent = minutes + ":" + seconds.toString().padStart(2, "0");

                        /* If timerValue reaches 0, play the notification */
                        if (timerValue === 0) {
                            clearInterval(timerInterval);
                            /* Play the notification sound*/
                            notificationSound.play();
                        }
                    }
                    clearInterval(timerInterval);
                    /* Start the timer loop, calling updateTimer every second*/
                    timerInterval = setInterval(updateTimer, 1000);

            }


            /* A function that is linked to the button which starts the timer and increments the counter*/
            function performStretchAndFold() {
                clearInterval(timerInterval);
                incrementCounter();
                startTimer();
            }



            function resetCounterAndTimer() {
                /* Stop the timer*/
                clearInterval(timerInterval);

                /* Reset the fold counter value to 0*/
                var foldCounterElement = document.getElementById("foldCounter");
                foldCounterElement.textContent = 0;

                /* Get a reference to the HTML element that displays the remaining timer value*/
                var timerDisplay = document.getElementById("timerDisplay");
                timerDisplay.textContent = 0;
        }


            /* A script for making the donation bar appear after a delay */
            document.addEventListener("DOMContentLoaded", function() {
                setTimeout(function() {
                document.querySelector('.donation').classList.add('show');
                /* Delay adding the class by 10 minutes (the setTimeout uses ms) */
                }, 300*1000); 
            });

        </script>


        <div class="tracker">

            <div class="folds-outer">
                <div class="folds">
                    <h2>FOLDS COMPLETED:</h2>
                    <span id="foldCounter">0</span>
                </div>
                <button onclick="resetCounterAndTimer()" class="reset">Reset the tracker</button>
            </div>

           <div class="time-outer">
                <div class="time">
                    <h2>TIME REMAINING:</h2>
                    <span id="timerDisplay">0</span>
                </div>
                <button onclick="performStretchAndFold()" class="perform">Perform a stretch & fold</button>
            </div>
        </div>

    </div>

        <footer class="footer">
            <div>
                <p><a href="privacypolicy.html">Privacy Policy</a></p>
                <p>Author: Kornelija Anttila</p>
            </div>
        </footer>
    </body>
</html>
